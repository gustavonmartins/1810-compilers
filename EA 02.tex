\documentclass[11pt]{scrartcl}
\usepackage[utf8]{inputenc}
\usepackage{mathtools}
\usepackage{amssymb}

\usepackage{caption}
\usepackage{color}
\usepackage{xcolor}
\usepackage{listings}
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox{gray}{\parbox{\textwidth}{#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white}

\usepackage{tikz}
\usetikzlibrary{automata,positioning}

\usepackage{makecell}

\title{\textbf{1810 Einsendeaufgabe KE 02}}
\author{Gustavo Nunes Martins}

\begin{document}
	\maketitle
	\section*{Aufgabe 1}
	Dieses Grammatik ist durch die B-Symbol links-rekursiv und nicht für rekursiven Abstieg geeinigt (unendliche loop). Man kann die links-Rekursion durch eine rechts-Rekursion ersetzen:
	
	\begin{center}
	$B \rightarrow yzzBV \mid AwV$
	
	$B' \rightarrow wzV \mid \varepsilon$
	\end{center}
	Die folgenden Syntax-Diagramme helfen, die Parser zu erzeugen. Die entsprechende Implementation ist nebenan:
	\subsection*{S:}
	\begin{minipage}{.4\textwidth}
	\includegraphics[width=0.4\linewidth]{ke-02/diagram/diagram/S}

	\end{minipage}
	\begin{minipage}{0.6\textwidth}
	\begin{lstlisting}[language=C]		
void CheckS(){
  CheckA();
  if (lookAhead!=$) then
    {error($)}
}
	\end{lstlisting}
	\end{minipage}
	\subsection*{A:}
	\begin{minipage}{0.4\textwidth}
	\includegraphics[width=1\linewidth]{ke-02/diagram/diagram/A}
	\end{minipage}
	\begin{minipage}{0.6\textwidth}
		\begin{lstlisting}[language=C]		
bool CheckA(){
  if (lookAhead=='x') then 
    {CheckB();match('y');match('x');return TRUE}
  else if (lookAhead=='w') then 
    {match('z');checkA();match('x');return TRUE}
  else error('A');
}
		\end{lstlisting}
	\end{minipage}	
	\subsection*{B:}
	\begin{minipage}{0.4\textwidth}
	\includegraphics[width=1\linewidth]{ke-02/diagram/diagram/B}
	
	\end{minipage}
	\begin{minipage}{0.6\textwidth}
	\begin{lstlisting}[language=C]		
void CheckB(){
if (lookAhead=='y') then 
  {match('z');match('z');checkB();checkV();}
else if (checkA()) then 
  {match('w');checkV();}
else error('B');
}
\end{lstlisting}
	\end{minipage}
	\subsection*{V:}
	\begin{minipage}{0.4\textwidth}
	\includegraphics[width=1\linewidth]{ke-02/diagram/diagram/V}
	\end{minipage}
	\begin{minipage}{0.6\textwidth}
		\begin{lstlisting}[language=C]		
void CheckV(){
  if (lookAhead=='w') then 
    {match('z');checkV();}
  else {}
}
		\end{lstlisting}
	\end{minipage}
\begin{lstlisting}[language=C]

int main(){
  lookAhead = nextSymbol();
  checkS();
}
		
void match(terminal t){
  if lookAhead != t then 
    error(t);
  else
    {lookAhead = nextSymbol();} / nextSymbol aus den Lexer
}

void error(symbol failedOn){
  printf("ERROR: Symbol %s malformed\n", failedOn);
  exit(-1);
}

\end{lstlisting}
	\section*{Aufgabe 2}
	\subsection*{a}
	Nur 2 Produktionsregeln sind verändert, nämlich:

	\begin{tabular}{l|l}
		vorher & naher \\ \hline
		$S \rightarrow aTbUcU \mid aTbU$ & 
		\makecell{$S \rightarrow aTbUS'$\\$ S'\rightarrow cU\mid \varepsilon$}
		\\ \hline
		$T\rightarrow dVd \mid dVdW \mid dVdX$ & \makecell{$T\rightarrow dVdT'$ \\$ T'\rightarrow \varepsilon\mid W \mid X$}
	\end{tabular}
	\subsection*{b}
	\begin{tabular}{l|l|l|l}
		Regel & FIRST & FOLLOW & Steuer \\ \hline
		S & \{a\} & \{\$\} & \{\} \\
		S' & $\{\varepsilon,c\}$ & \{\$\} & \{\} \\
		T & \{d\} & \{b\}  & \{\} \\
		T' & $\{\varepsilon,e,f\}$ & \{b\}  & \{\} \\
		W & \{e\} & \{b\} & \\
		X & \{f\} & \{b\} & \\
		U & $\{h, g, \varepsilon\}$ & \{\$,c\} & \\
		Y & \{h\} & \{b\} & \\
		V & \{d\} & \{d\} & \\
		Z & $\{g,\varepsilon\}$ & \{\$,c,b\} &
	\end{tabular}
	\subsection*{c}
	\begin{tabular}{l|l}
		1 & $S \rightarrow aTbUS'$  \\
		2 & $S' \rightarrow cU$ \\
		3 & $S' \rightarrow \varepsilon $\\
		4 & $T \rightarrow dVdT'$ \\
		5 & $T' \rightarrow \varepsilon$\\
		6 & $T' \rightarrow W $\\
		7 & $T' \rightarrow X$ \\
		8 & $U \rightarrow Y$\\
		9 & $U \rightarrow Z$\\
		10 & $V \rightarrow d$ \\
		11 & $W \rightarrow eT$ \\
		12 & $X \rightarrow fT$ \\
		13 & $Y \rightarrow hZ$ \\
		14 & $Z \rightarrow g$ \\
		15 & $Z \rightarrow \varepsilon$ \\
	\end{tabular}
	
	\begin{tabular}{l|l|l|l|l|l|l|l|l|l}
		Rule & a & b & c & d & e & f & g & h & \$ \\
		S \\
		S'\\
		T \\
		T' \\
		U \\
		V \\
		W \\
		X \\
		Y \\
		Z \\
	\end{tabular}
	\section*{Aufgabe 3}
\end{document}